<qrcodeLayout>:
    cols: 2
    GridLayout:
        size_hint: 1, 1
        cols: 1
        rows: 10  # Atualize o número de linhas
        padding: 5
        spacing: 3

        Label:
            id: result_label
            text: ""
            font_size: 24
            size_hint: 1, 1
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 0.2
                Rectangle:
                    size: self.size
                    pos: self.pos

        Label:
            id: last_result_label
            text: "Última captura: Nenhum"
            font_size: 24
            size_hint: 1, 1
            canvas.before:
                Color:
                    rgba: 0.9, 0.9, 0.9, 0.2
                Rectangle:
                    size: self.size
                    pos: self.pos

        Label:
            id: button_message_label
            text: ""
            font_size: 18
            size_hint: 1, None
            height: '30dp'
            canvas.before:
                Color:
                    rgba: 0.8, 0.8, 0.8, 0.2
                Rectangle:
                    size: self.size
                    pos: self.pos

        GridLayout:
            cols: 2
            rows: 1
            padding: 5
            spacing: 3
            size_hint: 1, None

            Label:
                text: "CODIGO:"
                size_hint: (None, None)
                height: '48dp'
                width: '100dp'
                font_size: 22
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 0.2
                    Rectangle:
                        size: self.size
                        pos: self.pos
            
            TextInput:
                id: cpf_input
                hint_text: "Digite o código"
                multiline: False
                font_size: 22
                size_hint_y: None
                height: '48dp'

        Button:
            text: 'BUSCAR CODIGO'
            size_hint_y: None
            height: '48dp'
            on_press: app.lookup_name()

        Button:
            text: 'LIMPAR CAMPO'
            size_hint_y: None
            height: '48dp'
            on_press: app.clean_input()

        Button:
            text: 'CONFIRMAR PRESENÇA'
            size_hint_y: None
            height: '48dp'
            on_press: app.confirm_presence()

        Button:
            text: 'REMOVER PRESENÇA'
            size_hint_y: None
            height: '48dp'
            on_press: app.revert_presence()

        Button:
            text: 'NOVO REGISTRO'
            size_hint_y: None
            height: '48dp'
            on_press: app.open_register_popup()

        Button:
            text: 'VISUALIZA REGISTOS'
            size_hint_y: None
            height: '48dp'
            on_press: app.view_records()

    GridLayout:
        cols: 1
        rows: 3
        padding: 5
        spacing: 3
        Image:
            id: camera_image
            size_hint: 1, 1
        Image:
            id: capture_image
            size_hint: 1, 1
        ToggleButton:
            text: 'Play'
            on_press: app.activate_camera()
            size_hint_y: None
            height: '48dp'

<RegisterPopup>:
    title: "Cadastro Novo"
    size_hint: 0.7, 0.5
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10

        GridLayout:
            cols: 2
            padding: 10
            spacing: 10

            Label:
                text: "CPF:"
                font_size: 16
                size_hint_y: None
                height: 30

            TextInput:
                id: cpf_input_register
                font_size: '16sp'
                multiline: False
                size_hint_y: None
                height: 30
                background_color: (1, 1, 1, 1)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                on_text_validate: app.focus_next_input('cpf_input_register')
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 1
                        rectangle: (self.x, self.y, self.width, self.height)

            Label:
                text: "Nome:"
                font_size: 16
                size_hint_y: None
                height: 30

            TextInput:
                id: nome_input_register
                font_size: '16sp'
                multiline: False
                size_hint_y: None
                height: 30  # Adjust input height
                background_color: (1, 1, 1, 1)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                on_text_validate: app.focus_next_input('nome_input_register')  # Handle TAB key
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 1
                        rectangle: (self.x, self.y, self.width, self.height)

            Label:
                text: "Relacionamento:"
                font_size: 16
                size_hint_y: None
                height: 30

            TextInput:
                id: relacionamento_input_register
                font_size: '16sp'
                multiline: False
                size_hint_y: None
                height: 30  # Adjust input height
                background_color: (1, 1, 1, 1)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                on_text_validate: app.focus_next_input('relacionamento_input_register')  # Handle TAB key
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 1
                        rectangle: (self.x, self.y, self.width, self.height)

            Label:
                text: "Celular:"
                font_size: 16
                size_hint_y: None
                height: 30

            TextInput:
                id: celular_input_register
                font_size: '16sp'
                multiline: False
                size_hint_y: None
                height: 30  # Adjust input height
                background_color: (1, 1, 1, 1)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                on_text_validate: app.focus_next_input('celular_input_register')  # Handle TAB key
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 1
                        rectangle: (self.x, self.y, self.width, self.height)

        BoxLayout:
            size_hint_y: None
            height: '48dp'
            spacing: 10  # Add some spacing between buttons
            Button:
                text: "Salvar"
                on_press: app.save_new_entry()
            Button:
                text: "Cancelar"
                on_press: app.close_popup()

<RecordsPopup>:
    title: "Registros"
    size_hint: 0.9, 0.9
    BoxLayout:
        orientation: 'vertical'
        ScrollView:
            size_hint: 1, 1
            bar_width: 20
            scroll_type: ['bars', 'content']
            bar_color: [0.7, 0.7, 0.7, 1]
            bar_inactive_color: [0.9, 0.9, 0.9, 1]
            effect_cls: 'ScrollEffect'
            GridLayout:
                id: content_records
                padding: 2
                spacing: 2
                size_hint_y: None
                cols: 5

        Button:
            text: "Voltar"
            size_hint: None, None
            size: 200, 50
            on_press: app.close_popup()
